import dynamic from 'next/dynamic';
import { Steps } from 'nextra/components';

export const Demo = dynamic(() => import('@components/demo'), { ssr: false });

<Demo />

<details>
  <summary>Disclaimer</summary>

Terminal emulation has limited capabilities. Copy, paste, history, colorization, and completion work, but not as seamlessly as in a real shell. For a smoother experience, you may want to try the demo locally:

```sh copy
npm i -g tsargp && complete -C tsargp tsargp
```

</details>

## Try it out

<Steps>
### Basic commands

- `tsargp -h` print the help message
- `tsargp` view the options' default values
- `tsargp ...` play with option values
- `clear` clear the screen

### Word completion

- check if completion works by pressing `<Tab>` (it behaves slightly differently than a real bash)
- check if option names get completed (e.g., `<Tab>`, `--<Tab>`, `--h<Tab>`)
- check if option parameters get completed (e.g., `-b <Tab>`, `-se <Tab>`, `-ne=<Tab>`)

### Positional arguments

- check if positional arguments can be specified before named ones (e.g., `two -s 0`)
- check if all arguments after `--` are recognized as positional (e.g., `-- -f`)

### Cluster arguments

- check if cluster arguments can be specified (e.g., `-sn 1 -1`)
- check if cluster arguments can be specified with inline parameters (e.g., `-s1` or `-n-1`)

### Value constraints

- check if a string parameter matches the required regex (e.g., try `-s A` and see that it fails)
- check if a string parameter matches one of the choices (e.g., try `-se A` and see that it fails)
- check if a number parameter matches the required range (e.g., try `-n 1` and see that it fails)
- check if a number parameter matches one of the choices (e.g., try `-ne=0` and see that it fails)

### Array constraints

- check if the element count is limited to a certain amount (e.g., `-- a b c d`)
- check if duplicate values get removed (e.g., `--numbersUnique 1,2,1,2`)

### Value replacement

When an option is specified more than once, the retained value is usually the last occurrence.

- check if values get overridden for a single-valued option (e.g., `-s 1 -n 1 -s 2 -n 2`)
- check if values get overridden for an array-valued option (e.g., `abc -- def`)
- check if values get _appended_ for an array-valued option that is configured that way (e.g., `--numbersUnique 1 --numbersUnique 2`)

### Inline parameters

- check if parameters can be inlined with option names (e.g., `-ss=abc`)
- check if inline parameters can contain equal signs (e.g., `-ss==a=b`)
- check if inline parameters are disallowed for an option (e.g., `-se=one`)
- check if inline parameters are required for an option (e.g., `-ne 1`)

### Help option

- check if the help option accepts option filters (e.g., `-h -b -ne`)
- check if the help option accepts a subcommand name (e.g., `-h hello`)
- check if the above can be combined (e.g., `-h hello -h`)

### Miscellaneous

- check if the `-f` option can be specified without a parameter, and negated with `--no-flag`
- check if the `-b` option can be specified in combination with required options

### Subcommands

Open the browser console with `F12`, to see the messages logged by the subcommand.

- check if the `hello` subcommand prints its arguments on the console
- check if the `hello` subcommand can have its own options (e.g., `hello -h`)
  - in this help message, see that a positional option can have no name
- check if the `hello` subcommand can be specified recursively (e.g., `hello a hello b c hello`)

### Text wrapping

With the console panel open, slide the screen splitter until the terminal width changes, then run the help option.

- check if words in the options' descriptions get wrapped correctly
- check if words in the usage section get wrapped correctly
- check if words in the footer do _not_ get wrapped (because it was configured that way)

### Toggle styles

- check if styles can be omitted with `NO_COLOR` (e.g., `NO_COLOR=1 ...`)
- check if styles are emitted with `FORCE_COLOR` (e.g., `NO_COLOR=1 FORCE_COLOR=1 ...`)
- check if styles are emitted when resetting (e.g., `NO_COLOR= FORCE_COLOR= ...`)

</Steps>
